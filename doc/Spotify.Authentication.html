    <!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.13.0">
    <title>Spotify.Authentication – spotify_ex v0.0.3</title>
    <link rel="stylesheet" href="dist/app-9c1e3d5aa2.css" />
    
      <link rel="canonical" href="https://hexdocs.pm/spotify_ex/Spotify.Authentication.html" />
    
    <script src="dist/sidebar_items.js"></script>
  </head>
  <body data-type="modules">
    <script>if(localStorage.getItem('night-mode')) document.body.className += ' night-mode';</script>

    <div class="main">
<button class="sidebar-toggle">
  <i class="icon-menu"></i>
</button>
<section class="sidebar">

  
  <a href="api-reference.html" class="sidebar-projectLink">
    <div class="sidebar-projectDetails">
      <h1 class="sidebar-projectName">
        spotify_ex
      </h1>
      <h2 class="sidebar-projectVersion">
        v0.0.3
      </h2>
    </div>
    
  </a>

  <div class="sidebar-search">
    <i class="icon-search"></i>
    <input type="text" class="sidebar-searchInput" placeholder="search" autocomplete="off" />
  </div>

  <ul class="sidebar-listNav">
    <li><a id="extras-list" href="#full-list">Pages</a></li>

    
      <li><a id="modules-list" href="#full-list">Modules</a></li>
    

    
      <li><a id="exceptions-list" href="#full-list">Exceptions</a></li>
    

    
  </ul>

  <ul id="full-list" class="sidebar-fullList"></ul>
  <div class="sidebar-noResults"></div>
</section>

<section class="content">
  <div class="content-outer">
    <div id="content" class="content-inner">


      <h1>
        <small class="visible-xs">spotify_ex v0.0.3</small>
        Spotify.Authentication
        
        
      </h1>

      
        <section id="moduledoc" class="docstring">
          <p>  Authenticates the Spotify user.</p>
<p>  After your app is authorized, the user must be authenticated.  A redirect
  URL is specified in the config folder.  This is the URL that Spotify
  redirects to after authorization, and should ultimately end up hitting
  this module’s <code class="inline">authenticate</code> function. If the authorization is successful,
  the param <code class="inline">code</code> will be present.</p>
<p>  If a refresh token still exists, the client will refresh the access token.</p>

        </section>
      

      
        <section id="summary" class="details-list">
          <h1 class="section-heading">
            <a class="hover-link" href="#summary">
              <i class="icon-link"></i>
            </a>
            Summary
          </h1>
          

          
  <div class="summary-functions summary">
    <h2>
      <a href="#functions">Functions</a>
    </h2>
    <div class="summary-row">
  <div class="summary-signature">
    <a href="#authenticate/2">authenticate(conn, map)</a>
  </div>
  
    <div class="summary-synopsis"><p>The authorization code must be present from spotify or an exception
  will be raised.  The token will be refreshed if possible, otherwise
  the app will request new access and request tokens</p>
</div>
  
</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#tokens_present?/1">tokens_present?(conn)</a>
  </div>
  
    <div class="summary-synopsis"><p>Checks for refresh and access tokens</p>
</div>
  
</div>

  </div>


          

          

        </section>
      

      

      
        <section id="functions" class="details-list">
          <h1 class="section-heading">
            <a class="hover-link" href="#functions">
              <i class="icon-link"></i>
            </a>
            Functions
          </h1>
          <div class="detail" id="authenticate/2">
  <div class="detail-header">
    <a href="#authenticate/2" class="detail-link" title="Link to this function">
      <i class="icon-link"></i>
    </a>
    <span class="signature">authenticate(conn, map)</span>
    
    
  </div>
  
  <section class="docstring">
    <p>  The authorization code must be present from spotify or an exception
  will be raised.  The token will be refreshed if possible, otherwise
  the app will request new access and request tokens.</p>
<p>  ## Example: ##</p>
<pre><code class="iex elixir">iex&gt; Spotify.authenticate(conn, %{&quot;code&quot; =&gt; code})
iex&gt; # {:ok, &quot;your access token&quot;, conn}

iex&gt; Spotify.authenticate(conn, %{&quot;not_a_code&quot; =&gt; invalid})
iex&gt; AuthenticationError, &quot;No code provided by Spotify. Authorize your app again&quot;</code></pre>

  </section>
</div>
<div class="detail" id="tokens_present?/1">
  <div class="detail-header">
    <a href="#tokens_present?/1" class="detail-link" title="Link to this function">
      <i class="icon-link"></i>
    </a>
    <span class="signature">tokens_present?(conn)</span>
    
    
  </div>
  
  <section class="docstring">
    <p>  Checks for refresh and access tokens</p>
<p>  ## Example: ##</p>
<pre><code class="elixir">defmodule PlayListController do
  plug :check_tokens

  def check_tokens do
    unless Spotify.Authentication.tokens_present?(conn) do
      redirect conn, to: authorization_path(:authorize)
    end
  end
end</code></pre>

  </section>
</div>

        </section>
      

      

      
          <footer class="footer">
        <p>
          <span class="line">
            Built using
            <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" rel="help" target="_blank">ExDoc</a> (v0.13.0),
          </span>
          <span class="line">
            designed by
            <a href="https://twitter.com/dignifiedquire" target="_blank" title="@dignifiedquire">Friedel Ziegelmayer</a>.
            </span>
        </p>
        <button class="night-mode-toggle" />
      </footer>
    </div>
  </div>
</section>
</div>
  <script src="dist/app-21f1a20b9e.js"></script>
  </body>
</html>

